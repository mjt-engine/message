{"version":3,"file":"msgsBufferToCombinedUint8Array.js","sourceRoot":"","sources":["../src/msgsBufferToCombinedUint8Array.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,WAAW,EAAE,MAAM,oBAAoB,CAAC;AAGjD,MAAM,CAAC,MAAM,8BAA8B,GAAG,CAAC,MAAa,EAAE,EAAE;IAC9D,IAAI,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;QACvC,MAAM,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC;IACnD,CAAC;IACD,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;IAC1E,MAAM,QAAQ,GAAG,IAAI,UAAU,CAAC,WAAW,CAAC,CAAC;IAC7C,IAAI,MAAM,GAAG,CAAC,CAAC;IACf,KAAK,MAAM,CAAC,IAAI,MAAM,EAAE,CAAC;QACvB,OAAO,CAAC,GAAG,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC,IAAI,CAAC,CAAC;QAC5C,QAAQ,CAAC,GAAG,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,MAAM,CAAC,CAAC;QAC7C,MAAM,IAAI,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC;IAC9B,CAAC;IACD,OAAO,CAAC,GAAG,CACT,kDAAkD,EAClD,QAAQ,CAAC,MAAM,CAChB,CAAC;IACF,OAAO,QAAQ,CAAC;AAClB,CAAC,CAAC","sourcesContent":["import { isUndefined } from \"@mjt-engine/object\";\nimport { Msg } from \"nats.ws\";\n\nexport const msgsBufferToCombinedUint8Array = (buffer: Msg[]) => {\n  if (buffer.some((m) => isUndefined(m))) {\n    throw new Error(\"Incomplete messages in buffer\");\n  }\n  const totalLength = buffer.reduce((acc, m) => acc + m.data.byteLength, 0);\n  const combined = new Uint8Array(totalLength);\n  let offset = 0;\n  for (const m of buffer) {\n    console.log(\"typeof m.data\", typeof m.data);\n    combined.set(new Uint8Array(m.data), offset);\n    offset += m.data.byteLength;\n  }\n  console.log(\n    \"msgsBufferToCombinedUint8Array: Combined length:\",\n    combined.length\n  );\n  return combined;\n};\n"]}